<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<style>
    .menuContainer {
        width: 70vw;
        height: 50vh;
        background-color: lightblue;
    }
    .cartContainer {
        width: 30vw;
        height: 50vh;
        background-color: blue;
    }
    .outerContainer {
        display: flex;
    }
</style>

<div class="outerContainer">
    <div class="menuContainer">
        <ul class="menuList">

        </ul>
    </div>

    <div class="cartContainer">
        <ul class="itemList">

        </ul>
    </div>
</div>
<script type="module">

import cart from "./cart.js";
import makeMenu, {getCategories,doA} from "./menu.js";

const cartObj = cart()
const menuService = makeMenu()
const catArr = getCategories()
const menuArr = menuService.getMenus()

const menuList = document.querySelector('.menuList')
const itemList = document.querySelector('.itemList')

function printMenus(menuArr){

    let str ='';

    str = menuArr.map( menu => `<li data-mno="${menu.mno}">${menu.mname}  ${menu.price}</li>`).join("")

    menuList.innerHTML = str
}

function printCart(arr) {
    let str ='';

    str = arr.map( item => `<li data-mno="${item.mno}">${item.mname}  ${item.price} --${item.qty} </li>`).join("")

    itemList.innerHTML = str

}

menuList.addEventListener('click', e => {
    const target = e.target
    if(target.tagName !== 'LI') { return }

    const mno = Number(target.dataset.mno)
    const targetMenu = menuService.getMenu(mno)

    const currentItems = cartObj.add(targetMenu)
    printCart(currentItems)


}, false)

printMenus(menuArr)



</script>

</body>
</html>