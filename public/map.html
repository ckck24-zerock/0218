<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Kakao 지도 시작하기</title>
</head>
<body>


<div id="map" style="width:100vw;height:50vh;"></div>
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=ba7eb7ddf1f56ab28f3ee61c9627f2e0"></script>

<script>

  const container = document.querySelector('#map')
  const options = {
    center: new kakao.maps.LatLng(35.170797, 129.114157),
    level: 3
  }

  const map = new kakao.maps.Map(container, options);

</script>

<script>

  function makeMarker(store) {

    const {sno, name, lat, lng} = store //구조 분해 할당

    const markerPosition  = new kakao.maps.LatLng(lat, lng);

    const marker = new kakao.maps.Marker({
      position: markerPosition
    });

    marker.show = function () {
      marker.setMap(map)
    }
    marker.hide = function () {
      marker.setMap(null)
    }

    store.marker = marker

    return store
  }


  const stores = [
    {sno:1, name: '늘해랑', lat: 35.172417,lng:129.071677 , cat:'S'},
    {sno:2, name: '국제밀면', lat:35.19686 ,lng: 129.07787, cat:'N'},
    {sno:3, name: '합천일류돼지국밥', lat: 35.162277,lng: 128.980138, cat:'S'},
    {sno:4, name: '범일돼지국밥', lat: 35.242739,lng: 129.093678, cat:'S'},
    {sno:5, name: '미각반점', lat:35.228885 ,lng:129.085024 , cat:'C'},
    {sno:6, name: '수복 돼지국밥', lat:35.205792,lng:129.102198 , cat:'S'},
  ]

  const markedStores = stores.map( s => makeMarker(s))

  console.log(markedStores)

  markedStores[0].marker.show()



</script>

</body>
</html>